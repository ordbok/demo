/* Copyright (c) ORDBOK contributors. All rights reserved.                   */

define("@ordbok/core/dist/lib/ajax",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){this._cache={},this.baseUrl=e||"",this.cacheTimeout=t||36e5,this.responseTimeout=r||6e4}return e.prototype.request=function(e){var t=this;return new Promise(function(r,n){var i=t.baseUrl+e;if(t.cacheTimeout>0){var o=t._cache[i],s=(new Date).getTime()+t.cacheTimeout;if(o&&o.timestamp>s)return void r(o);delete t._cache[i]}var u=new XMLHttpRequest;try{0===t.cacheTimeout&&-1===i.indexOf("?")?u.open("GET",i+"?"+(new Date).getTime(),!0):u.open("GET",i,!0),u.timeout=t.responseTimeout,u.addEventListener("load",function(e){return r({result:(u.response||"").toString(),serverStatus:u.status,timestamp:e.timeStamp,url:i})}),u.addEventListener("error",function(e){var t=new Error("error");t.result=u.response.toString(),t.serverStatus=u.status,t.timestamp=e.timeStamp,t.url=i,n(t)}),u.addEventListener("timeout",function(e){var t=new Error("timeout");t.result=u.response.toString(),t.serverStatus=u.status,t.timestamp=e.timeStamp,t.url=i,n(t)}),u.send()}catch(e){var a=e;a.result=u.response||"",a.timestamp=(new Date).getTime(),a.serverStatus=u.status,a.url=i,n(a)}})},e}();t.Ajax=r}),define("@ordbok/core/dist/lib/utilities",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/[^0-9A-Za-z\u0080-\uFFFF- ]/g,n=/^(.*?)([^\.\/]*)([^\/]*)$/,i=/\s+/g;!function(e){function t(e){var t=n.exec(e);return t&&t[3]||""}function o(e){var t=n.exec(e);return t&&t[2]||""}function s(e){return e.replace(r," ").trim().replace(i,"-").toLowerCase()}function u(e){return e.replace(r," ").trim().replace(i," ").toLowerCase()}function a(e){var t=n.exec(e);return t&&t[1]||""}function c(e){for(var t=[],r=0,n=0,i=e.length;n<i;++n)r=e.charCodeAt(n),r>31&&r<128&&(r+=r<80?48:-48),t.push(String.fromCharCode(r));return t.join("")}e.getExtension=t,e.getBaseName=o,e.getKey=s,e.getNorm=u,e.getParentPath=a,e.rotate=c}(t.Utilities||(t.Utilities={}))});var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("@ordbok/core/dist/lib/dictionary",["require","exports","./ajax","./utilities"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.parse=function(e){var t,r,n={};return e.split("\n").forEach(function(e){if(-1===e.indexOf(":"))return void(n[e]=r={});r&&(t=e.split(":",2),r[t[0]]=t[1].split(","))}),n},t.stringify=function(e){var t,r=[];return Object.keys(e).forEach(function(i){r.push(n.Utilities.getKey(i)),t=e[i],Object.keys(t).forEach(function(e){return r.push(n.Utilities.getKey(e)+":"+t[e].join(","))})}),r.join("\n")},t.prototype.loadEntry=function(e){var r=this;return new Promise(function(i){r.request(n.Utilities.getKey(e)+".txt").then(function(e){if(!(e instanceof Error||e.serverStatus>=400)){var r=t.parse(e.result);return!r||r instanceof Array?void 0:r}}).catch(function(e){console.error(e)}).then(i)})},t}(r.Ajax);t.Dictionary=i}),define("@ordbok/core/dist/lib/text",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/\s+/g,n=function(){function e(e){this._value=e}return e.endsWith=function(e,t){if(e===t)return!0;var r=e.length,n=t.length;return n<=r&&e.lastIndexOf(t)===r-n},e.trimSpaces=function(e){return e.replace(r," ").trim()},e.prototype.endsWith=function(t){return e.endsWith(this._value,t)},e.prototype.trimSpaces=function(){return new e(e.trimSpaces(this._value))},e}();t.Text=n}),define("@ordbok/core/dist/lib/markdown",["require","exports","./text"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/^(?:#+([\s\S]*)|([\s\S]*?)\n(?:={3,}|-{3,}))$/,i=/^([^\:\n\r\t\v]+):([\s\S]*)$/,o=/(?:^\n?|\n\n)-{3,}(?:\n\n|\n?$)/,s=/\n{2,}/,u=function(){function e(e){this._pages=[],this._raw=e,this.parse(e)}return e.parsePage=function(e){var t,o,u={};return e.split(s).forEach(function(e){t=n.exec(e),t&&(u[r.Text.trimSpaces(t[1]||t[2])]=o={}),o&&(t=i.exec(e))&&(o[t[1]]=t[2].split(",").map(r.Text.trimSpaces))}),u},Object.defineProperty(e.prototype,"pages",{get:function(){return this._pages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raw",{get:function(){return this._raw},enumerable:!0,configurable:!0}),e.prototype.parse=function(t){var r=this._pages;t.split(o).forEach(function(t){return r.push(e.parsePage(t))})},e}();t.Markdown=u}),define("@ordbok/core/dist/lib/index",["require","exports","./ajax","./dictionary","./markdown","./text","./utilities"],function(e,t,r,n,i,o,s){"use strict";function u(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),u(r),u(n),u(i),u(o),u(s)}),define("@ordbok/core",["@ordbok/core/dist/lib/index"],function(e){return e}),define("demo/index",["require","exports","@ordbok/core"],function(e,t,r){"use strict";function n(){o.loadEntry(r.Utilities.getKey(s.value)+"-0").then(function(e){e&&alert(e[r.Utilities.getKey("New Norwegian")].words)}).catch(alert)}function i(){o=new r.Dictionary("translations/"),s=document.getElementById("search"),s.addEventListener("change",n)}Object.defineProperty(t,"__esModule",{value:!0});var o,s;t.start=i}),define("demo",["require","exports","demo/index"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r)});